<h1 align="center">Max挖礦機器人</h1>

## 簡介
這是一個基於位於台灣的虛擬貨幣交易所-[Max Exchange](https://max.maicoin.com/)，其交易挖礦機制所製作的自動套利交易機器人。   
這僅適用於2018/12月附近的市況，並且由於市場當時的劇烈變化，機器人的開發並未全部完成，但其核心交易功能以經完成，可以實現獲利。    
撰寫本文件的當下套利機會以不復存在，因此請不要使用使機器人。但是基礎功能依然存在，未來若是有類似的機會可修改此機器人以繼續進行交易。    

## 安裝及使用
此機器人使用Python 3.7.0於Windows 10版本1803。  
並使用以下package－ requests, json, time, hmac, hashlib, base64, sys, random, configparser。   
將本專案下列所述文件下載至同一資料夾即可使用。以下將說明各項文件: 
* account.ini：儲存帳號api key & secret、使用者名稱、交易貨幣。
* launch.py：提取account.ini資料的功能。
* api.py：包含所有連結交易所api的功能。
* trade.py：交易邏輯。
* main.py：流程控制與功能串聯，運行本文件以開始機器人。


使用流程如下:
<ol>
  <li>此交易機器人需要兩組Maxcoin交易所的帳號，並且需要申請交易所API。</li>
  <li>請決定存在於交易所的一組交易對為目標，決定哪個是基準貨幣、哪個是交易貨幣，往後報價將以基準貨幣為主。</li>
  <li>請於兩組帳號內分別存入等價的基準貨幣和交易貨幣。帳戶內沒錢或是太少機器人不能進行交易。</li>
  <li>請在account.ini輸入一位使用者名稱，並且輸入兩組api key & secret ，並在base輸入基準貨幣(ex: usdt) 和 ex 輸入作為交易貨幣(ex: btc)。這裡建議base使用usdt，因為相對穩定，並且直觀。往後交易將以這個組合為標的，並且適用一般外匯的概念。買即買入ex賣出base，賣即賣出ex買入base。</li>
  <li>啟動main.py，按照指示輸入即可開始機器人。</li>
</ol>

## 交易邏輯
此小節解說為何能夠獲利。細節請參考[Max 交易所白皮書。](https://assets.maicoin.com/max/max-token-whitepaper-zh-tw-12172018.pdf)

交易基於Max交易所的交易挖礦和分紅機制進行，具體來說有以下規則：
* 每筆交易Maker收取0.05%手續費，Taker 0.15%。
* 交易挖礦－交易完成當下，以交易所自己的貨幣（max）返還一部份付出的手續費。比例隨產出的max而遞減，起始值為60%。
* 於每天00:30結算前日所有交易，並且以等價max返回一部份所完成的交易的手續費。Maker 40%，Taker 10 %。

假設在同個價位進行買賣，並同時擔任買賣方，即可實行套利。以下為範例：

set btc/usdt = 8000 ， 並假設返還的max直接轉換成等價usdt  
若發生一筆 1btc limit sell at 8000的交易 (同時有一筆1 btc market buy 的單，並在8000成交)，整體手續費變化如下 

1 * 8000 * 0.05% = 4 (Maker fee)  
8000 * 0.15% = 12 (Taker fee) 
Total fee =16 
交易當下返還60% fee = 16 * 60% = 9.6  
結算時返還 
16 * 0.4 = 6.4 (Maker)  
16 * 0.1 = 1.6 (Taker)  

全部總和
-16 + 9.6 + 6.4 + 1.6 = 1.6  此數值及為套利利潤。

## 注意事項
投資理財有賺有賠，而虛擬貨幣更是高風險產業。以下包含但不限使用時應須考量的注意事項。
* 現今由於手續費回饋從60%下降到50%，因此已不存在利潤空間。
* 這是基於手續費的套利，因此需要大量的交易筆數才能達到一定利潤。建議1000~2000筆左右。
* 若是無法在同價位進行交易，會造成小額虧損。
* 由於不斷地付出手續費，總帳戶金額會不斷減少，直到清晨結算才會恢復。
* 當下返還的max須立即賣出，有利於複利及減少波動風險。
* 當下返還的max具體是交易所將收到手續費於市場現貨賣出(買入max) 得到的。由於是系統自動執行，可以利用此機制將手上max用較好的價格出清。
* 清晨返還的max存在大量出貨暴跌的風險。不過可以儲存一些隔日利用第五點的規則出清。
* 交易所有護盤的傾向，具體來說是 max/usdt 護在 0.081。(現已不適用)
* 由於此交易所是淺碟市場，交易所有造市機器人。但是快市時有機會當掉，此時請立即中止交易。也因此為防價格偏差，價使用其他大型交易所的。
* 有被惡意攻擊的風險，因此在價格和數量都使用隨機值。

> 過去的交易紀錄
<p align="center">
  <img src="https://raw.githubusercontent.com/kuei0221/Max-Mining/master/trade_record.png" width=80%>
</p>
